<template>
    <div class="updatelog-sidebar">
        <h2>ğŸª æœ€æ–°ç‰ˆæœ¬</h2>
        <ul>
            <li><a href="#" @click.prevent="scrollLatest(latest.id)">v{{ latest.version }}</a></li>
        </ul>
        <h2>ğŸ¥ å†å²ç‰ˆæœ¬</h2>
        <ul>
            <li v-for="(item, index) in history" :key="index">
                <a href="#" @click.prevent="scrollHistory(item.id)">v{{ item.version }}</a>
            </li>
        </ul>
    </div>
</template>
<script setup>
import { ref } from 'vue'
import { useUpdatelogStore } from '@/stores/updatelog';
import { storeToRefs } from 'pinia';
import { scrollTo } from '@/utils/scroll'

const updatelogStore = useUpdatelogStore()

const { latest, history } = storeToRefs(updatelogStore)

// //æ»šåŠ¨æ¡æ»šåŠ¨åˆ°å¯¹åº”ç‰ˆæœ¬
// const scrollToVersion = (version) => {
//     const element = document.getElementById(`version-${version}`)
//     const container = document.querySelector('.updatelog');  // è·å–æ»šåŠ¨å®¹å™¨
//     if (container && element) {
//         // è·å–ç›®æ ‡å…ƒç´ ç›¸å¯¹äºå®¹å™¨çš„åç§»ä½ç½®
//         const rect = element.getBoundingClientRect();
//         const containerRect = container.getBoundingClientRect();
//         // è®¡ç®—ç›®æ ‡å…ƒç´ çš„ top åç§»é‡
//         const offsetTop = rect.top - containerRect.top + container.scrollTop;
//         // ä½¿ç”¨ scrollTo æ»šåŠ¨åˆ°ç›®æ ‡ä½ç½®
//         window.scrollTo({
//             top: offsetTop - 100,
//             behavior: 'smooth'
//         });
//     }

// }
const scrollHistory = (version) => {
    const element = document.getElementById("version" + version)
    scrollTo(element, 300, null, 70)
}

const scrollLatest = (version) => {
    const element = document.getElementById("latest")
    scrollTo(element, 300, null, 70)
}
</script>
<style lang="scss" scoped>
@use "@/assets/styles/updatelog/sidebar.scss" as *;
</style>